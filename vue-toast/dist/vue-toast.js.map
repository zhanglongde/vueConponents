{"version":3,"file":"vue-toast.js","sources":["../src/toast/index.vue","../src/manager/index.vue"],"sourcesContent":["<style src=\"./style.css\"></style>\n\n<template>\n  <transition name=\"vue-toast-opacity\">\n    <div\n      class='vue-toast_container'\n      @mouseover='_stopTimer'\n      @mouseleave='_startTimer'\n      :style='style'\n      :class='[theme]'\n    >\n      <div class='vue-toast_message'>\n        <span v-html='message'></span>\n        <span\n          class='vue-toast_close-btn'\n          v-if='options.closeBtn'\n          @click='remove'\n        />\n        </span>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script>\nconst defaultOptions = {\n  theme: 'default', // info warning error success\n  timeLife: 5000,\n  closeBtn: false,\n}\n\nexport default {\n  props: {\n    message: {\n      required: true\n    },\n    position: {\n      type: Number,\n      required: true\n    },\n    onDestroy: {\n      required: true,\n      type: Function\n    },\n    options: {\n      type: Object\n    }\n  },\n  data() {\n    return {\n      isShow: false\n    }\n  },\n  computed: {\n    theme() {\n      return '_' + this.options.theme\n    },\n    style() {\n      return `transform: translateY(${this.options.directionOfJumping}${this.position * 100}%)`\n    },\n    fullOptions() {\n      return Object.assign({}, defaultOptions, this.options)\n    }\n  },\n  mounted() {\n    setTimeout(() => {\n      this.isShow = true\n    }, 50)\n\n    if (!this.fullOptions.closeBtn) {\n      this._startLazyAutoDestroy()\n    }\n  },\n  methods: {\n    // Public\n    remove() {\n      this._clearTimer()\n      this.onDestroy()\n    },\n    // Private\n    _startLazyAutoDestroy() {\n      this._clearTimer()\n      this.timerDestroy = setTimeout(() => {\n        this.remove()\n      }, this.fullOptions.timeLife)\n    },\n    _clearTimer() {\n      if (this.timerDestroy) {\n        clearTimeout(this.timerDestroy)\n      }\n    },\n    _startTimer() {\n      if (!this.fullOptions.closeBtn) {\n        this._startLazyAutoDestroy()\n      }\n    },\n    _stopTimer() {\n      if (!this.options.closeBtn) {\n        this._clearTimer()\n      }\n    }\n  }\n}\n</script>\n","<style src='./style.css'></style>\n\n<template>\n  <transition-group\n    tag='div'\n    name='vue-toast'\n    class='vue-toast-manager_container'\n    :class='classesOfPosition'\n  >\n    <vue-toast\n      v-for='(toast, index) in toasts'\n      :key='toast.uid'\n      :message='toast.message'\n      :options='toast.options'\n      :onDestroy='toast.onDestroy'\n      :position='index'\n    ></vue-toast>\n  </transition-group>\n</template>\n\n<script>\nimport VueToast from '../toast/index.vue'\nimport {isNumber} from '../utils.js'\n\nconst defaultOptions = {\n  maxToasts: 6,\n  position: 'left bottom'\n}\n\nexport default {\n  data() {\n    return {\n      uid: 1,\n      toasts: [],\n      options: defaultOptions\n    }\n  },\n  computed: {\n    classesOfPosition() {\n      return this._updateClassesOfPosition(this.options.position)\n    },\n    directionOfJumping() {\n      return this._updateDirectionOfJumping(this.options.position)\n    }\n  },\n  methods: {\n    // Public\n    showToast(message, options) {\n      this._addToast(message, options)\n      this._moveToast()\n\n      return this\n    },\n    setOptions(options) {\n      this.options = Object.assign(this.options, options || {})\n\n      return this\n    },\n    closeAll() {\n      this.toasts = []\n    },\n    // Private\n    _addToast(message, options = {}) {\n      if (!message) {\n        return\n      }\n\n      options.directionOfJumping = this.directionOfJumping\n\n      const that = this\n      const uid = this.uid++\n      const toast = {\n        uid,\n        message,\n        options,\n        onDestroy() {\n          const i = that.toasts.findIndex(item => item.uid === uid)\n          that.toasts.splice(i, 1)\n        }\n      }\n\n      this.toasts.unshift(toast)\n    },\n    _moveToast(toast) {\n      const maxToasts = this.options.maxToasts > 0\n        ? this.options.maxToasts\n        : 9999\n\n      this.toasts = this.toasts.reduceRight((prev, toast, i) => {\n        if (i + 1 >= maxToasts) {\n          return prev\n        }\n\n        return [toast].concat(prev)\n      }, [])\n    },\n    _updateClassesOfPosition(position) {\n      return position.split(' ').reduce((prev, val) => {\n        prev[`__${val.toLowerCase()}`] = true\n\n        return prev\n      }, {})\n    },\n    _updateDirectionOfJumping(position) {\n      return position.match(/top/i) ? '+' : '-'\n    }\n  },\n  components: { VueToast }\n}\n</script>\n"],"names":["const","defaultOptions","this"],"mappings":"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"}